{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Flasky{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Olá, {% if name %}{{ name }}{% else %}Stranger{% endif %}!</h1>

    {% if not known %}
        <p>Prazer em conhecê-lo!</p>
    {% else %}
        <p>Feliz em vê-lo novamente!</p>
    {% endif %}

    {% if form.email.data %}
        <p>✅ Um e-mail foi enviado para o <strong>Administrador do sistema</strong>, notificando o cadastro de um novo usuário.</p>
    {% endif %}
</div>

<!-- Formulário -->
<div class="well">
    {{ wtf.quick_form(form) }}
</div>

<h2>Relação de usuários cadastrados</h2>

{% if users %}
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Nome do usuário</th>
                <th>Função</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.username }}</td>
                <td>
                    {% if user.role %}
                        {{ user.role.name }}
                    {% else %}
                        <span>User</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>Nenhum usuário cadastrado ainda.</p>
{% endif %}
{% endblock %}
